
<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Streaming Video Demo (Socket.IO)</title>
    <style>
      body { font-family: ui-sans-serif, system-ui; margin: 24px; }
      #wrap { display: grid; grid-template-columns: 320px 1fr; gap: 16px; align-items: start; }
      #preview { max-width: 100%; border: 1px solid #ccc; border-radius: 8px; }
      label { display:block; margin-top:8px; font-size: 14px; color:#444; }
      input[type=text] { width: 100%; padding: 8px; border: 1px solid #bbb; border-radius: 6px; }
      button { padding: 8px 12px; border: 0; background:#111; color:#fff; border-radius:8px; cursor:pointer; margin-top:8px; }
      #status { margin-top:8px; font-size:12px; color:#666; }
    </style>
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js" crossorigin="anonymous"></script>
  </head>
  <body>
    <h2>Streaming Video Demo (Socket.IO)</h2>
    <div id="wrap">
      <div>
        <label>Seed</label>
        <input type="text" id="seed" value="42" />
        <label>Prompt</label>
        <input type="text" id="prompt" placeholder="Type your prompt..." />
        <button id="startBtn">Start</button>
        <div id="status">Idle</div>
      </div>
      <div>
        <img id="preview" />
      </div>
    </div>
    <script>
      const socket = io();
      const preview = document.getElementById('preview');
      const statusEl = document.getElementById('status');
      document.getElementById('startBtn').onclick = () => {
        statusEl.textContent = 'Starting...';
        socket.emit('start', {prompt: document.getElementById('prompt').value, seed: document.getElementById('seed').value});
      };
      socket.on('frame', (msg) => {
        preview.src = "data:image/jpeg;base64," + msg.data;
        statusEl.textContent = "Frame " + msg.index;
      });
      socket.on('eos', () => {
        statusEl.textContent = "Done";
      });
    </script>
  </body>
</html>
